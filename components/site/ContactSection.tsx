'use client';

import { motion } from 'framer-motion';
import { Mail, ArrowRight } from 'lucide-react';
import TypeformEmbed from '@/components/shared/TypeformEmbed';

const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1,
      delayChildren: 0.2,
    },
  },
};

const itemVariants = {
  hidden: { opacity: 0, y: 24 },
  visible: {
    opacity: 1,
    y: 0,
    transition: {
      duration: 0.5,
      ease: [0.25, 0.46, 0.45, 0.94] as [number, number, number, number],
    },
  },
};

interface ContactSectionProps {
  title?: string;
  subtitle?: string;
  description?: string;
  email?: string;
  showCommunityButton?: boolean;
  className?: string;
  /**
   * Optional custom Typeform ID. If not provided, uses the default contact form.
   */
  typeformId?: string;
}

/**
 * ContactSection - Reusable contact section with Typeform embed
 *
 * This component provides a styled contact section with:
 * - Customizable title, subtitle, and description
 * - Email button
 * - Optional community button
 * - Embedded Typeform contact form
 *
 * Usage:
 *   <ContactSection />                                    // Default settings
 *   <ContactSection email="custom@email.com" />           // Custom email
 *   <ContactSection typeformId="abc123" />                // Custom form
 */
export default function ContactSection({
  title = "Let's Connect",
  subtitle = "We'd love to hear from you",
  description = "Whether you're a foster youth looking for support, an organization wanting to partner, or someone who wants to make a differenceâ€”reach out. We're here for you.",
  email = "info@fostergreatness.co",
  showCommunityButton = true,
  className = "",
  typeformId,
}: ContactSectionProps) {
  return (
    <motion.section
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true, margin: "-50px" }}
      variants={containerVariants}
      className={className}
    >
      <div className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-fg-navy via-fg-navy to-fg-blue/80">
        {/* Decorative elements */}
        <div className="absolute top-0 left-0 w-72 h-72 bg-fg-blue/20 rounded-full blur-3xl -translate-y-1/2 -translate-x-1/2" />
        <div className="absolute bottom-0 right-0 w-96 h-96 bg-fg-coral/10 rounded-full blur-3xl translate-y-1/2 translate-x-1/2" />
        <div className="absolute top-1/2 left-1/2 w-64 h-64 bg-white/5 rounded-full blur-2xl -translate-x-1/2 -translate-y-1/2" />

        <div className="relative p-8 md:p-12">
          <div className="grid lg:grid-cols-2 gap-8 lg:gap-12 items-center">
            {/* Content */}
            <motion.div variants={itemVariants}>
              <div className="inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full mb-6">
                <Mail className="w-4 h-4 text-white" />
                <span className="text-sm font-semibold text-white/90">{subtitle}</span>
              </div>

              <h2 className="text-3xl md:text-4xl font-bold text-white mb-6 leading-tight">
                {title}
              </h2>
              <p className="text-lg text-white/80 leading-relaxed mb-8">
                {description}
              </p>

              <div className="flex flex-wrap gap-4">
                <a
                  href={`mailto:${email}`}
                  className="inline-flex items-center gap-2 px-6 py-3 bg-white text-fg-navy font-semibold rounded-full hover:bg-fg-light-blue transition-colors"
                >
                  <Mail className="w-4 h-4" />
                  Email Us
                </a>
                {showCommunityButton && (
                  <a
                    href="https://community.fostergreatness.co"
                    target="_blank"
                    rel="noopener noreferrer"
                    className="inline-flex items-center gap-2 px-6 py-3 bg-transparent text-white font-semibold rounded-full border-2 border-white/30 hover:bg-white/10 transition-colors"
                  >
                    Join Community
                    <ArrowRight className="w-4 h-4" />
                  </a>
                )}
              </div>
            </motion.div>

            {/* Typeform */}
            <motion.div
              variants={itemVariants}
              className="bg-white rounded-2xl shadow-2xl overflow-hidden"
            >
              <TypeformEmbed formId={typeformId} />
            </motion.div>
          </div>
        </div>
      </div>
    </motion.section>
  );
}
